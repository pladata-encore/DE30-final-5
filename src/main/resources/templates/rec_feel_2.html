<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>Rec Feel</title>
    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="rec_feel_2.css">
</head>
<body>
<div class="container">
    <div class="emotion-selection">
        <h1 class="title">기분별 추천 영화</h1>
        <div class="emotion-container">
            <div class="emotion" onclick="selectEmotion('상처 받은')">상처 받은</div>
            <div class="emotion" onclick="selectEmotion('기쁜')">기쁜</div>
            <div class="emotion" onclick="selectEmotion('화난')">화난</div>
            <!-- 다른 감정도 추가 가능 -->
        </div>
    </div>

    <div id="recommendations" class="recommendations" style="display: none;">
        <span class="emotion-display"></span>
        <div class="movie-list">
            <!-- 추천 영화 목록이 표시될 부분 -->
            <!-- 예시 데이터 (이 부분은 서버 측 데이터로 동적으로 생성될 것입니다) -->
            <div class="movie-item" data-title="리틀 포레스트" data-cast="류준열" data-director="임순례" data-plot="영화 '돈'은... (상세 내용)" data-poster-url="https://image.tmdb.org/t/p/original/example_poster.jpg">
                <img src="https://image.tmdb.org/t/p/original/example_poster.jpg" alt="리틀 포레스트" class="movie-poster">
                <button onclick="viewDetails(this)">View Details</button>
            </div>
            <!-- 추가적인 영화 항목 -->
        </div>
    </div>
</div>

<script>
    function selectEmotion(emotion) {
        document.querySelector('.emotion-display').textContent = `${emotion} 기분이신 당신께 추천드리는 영화입니다`;
        document.querySelector('.emotion-selection').style.display = 'none';
        document.getElementById('recommendations').style.display = 'block';
    }

    function getEmotionFromUrl() {
        const params = new URLSearchParams(window.location.search);
        return params.get('emotion') || '기분';
    }

    function viewDetails(button) {
        const movieItem = button.parentElement;
        const title = movieItem.dataset.title;
        const cast = movieItem.dataset.cast;
        const director = movieItem.dataset.director;
        const plot = movieItem.dataset.plot;
        const posterUrl = movieItem.dataset.posterUrl;

        // Redirect to rec_feel_fin with movie details as query parameters
        window.location.href = `/rec_feel_fin?poster_url=${encodeURIComponent(posterUrl)}&title=${encodeURIComponent(title)}&cast=${encodeURIComponent(cast)}&director=${encodeURIComponent(director)}&plot=${encodeURIComponent(plot)}`;
    }

    window.onload = function() {
        const emotion = getEmotionFromUrl();
        if (emotion) {
            document.querySelector('.emotion-display').textContent = `${emotion} 기분이신 당신께 추천드리는 영화입니다`;
            document.querySelector('.emotion-selection').style.display = 'none';
            document.getElementById('recommendations').style.display = 'block';
        }
    }
</script>
</body>
</html>
